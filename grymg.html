<!DOCTYPE = html>
<html>
    
    <head>
        <title>God Rest Ye Merry Gentlemen...</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
        function playSound(number){
            var src = 'sounds/grymg'+number+'.wav';
            var audio = new Audio(src);
            audio.play();
        }
        var lst = []
        for (i = 1; i < 6; i++){
            var src = 'sounds/grymg'+i+'.wav';
            var audio = new Audio(src);
            getDuration(src);
        }
        
        
        
        var i = -1
        var interval; //for setInterval
        var duration; //for setInterval duration
        function decodeStr(){
            s = document.getElementById("code").value;
            i += 1; //increment the index
            function loop(){
                duration = lst[i]*1000;
                interval = window.setInterval(function () {
                    playSound(s.charAt(i));
                    window.clearInterval(interval); //clear
                    if (i < s.length) {
                        loop(); //re-run
                    } else {
                        alert("done!")
                        i = -1; //reset
                    }
                }, duration);
            }
            loop();
        }
            
        function test(){
            window.setInterval(function(){console.log("hi");},1000);
        
        }
        
        function getDuration(src) {
            var destination = document.getElementById("duration")
            var audio = new Audio();
            $(audio).on("loadedmetadata", function(){
                destination.textContent = audio.duration;
                lst.push(audio.duration);
            });
            audio.src = src;
        }
        </script>
    </head>

    <body>
        <span id="duration"></span>
        <input type="button" class="btn" onclick="playSound('1')" value="115"/>
        <input type="button" class="btn" onclick="playSound('2')" value="5432"/>
        <input type="button" class="btn" onclick="playSound('3')" value="101"/>
        <input type="button" class="btn" onclick="playSound('4')" value="23"/>
        <input type="button" class="btn" onclick="playSound('5')" value="45"/>
        
        <input type="text" id="code"/>
        <input type="button" class="btn" onclick="timings()" value="Play"/>
    </body>
</html>
